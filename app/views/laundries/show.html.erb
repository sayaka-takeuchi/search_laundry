<div class="store-show">
  <h2 class="text">店舗詳細</h2>
  <%# 店舗情報 %>
  <div class="store-box">
    <%= image_tag @laundry.image.variant(resize: '300x300'), class: 'store-image' %>
    <table class="detail-table">
      <tbody>
        <tr>
          <th class="detail-store">店名</th>
          <td class="detail-value"><%= @laundry.name %></td>
        </tr>
        <tr>
          <th class="detail-store">住所</th>
          <td class="detail-value"><%= @laundry.address %></td>
        </tr>
        <tr>
          <th class="detail-store">オープン日</th>
          <td class="detail-value"><%= l @laundry.opening_date %></td>
        </tr>
        <tr>
          <th class="detail-store">営業時間</th>
            <% if @laundry.open_time == @laundry.close_time %>
              <td class="detail-value">24時間営業</td>
            <% else %>
              <td class="detail-value"><%= l @laundry.open_time, format: :short %> 〜 <%= l @laundry.close_time, format: :short %> </td>
            <% end %>
        </tr>
      </tbody>
    </table>
  </div>
  <div id='map'></div>
  <%# 店舗詳細ページ切り替え %>
  <div class="links">
    <% if @laundry.previous.present?%>
      <%= link_to "次の店舗 >>", laundry_path(@laundry.previous), class: "next-btn"%>
    <% end %>
    <% if @laundry.next.present?%>
      <%= link_to "<< 前の店舗", laundry_path(@laundry.next), class: "prev-btn"%>
    <% end %>
  </div>
  <%# コメント欄 %>
  <div class="comment-box">
    <% if current_user %>
      <div class="comment-form">
        <%= form_with(model: @comment, url: laundry_comments_path(@laundry.id), local: true) do |form| %>
          <%= form.text_area :text, placeholder: "コメントする", rows: "5", class: "comment-text" %>
          <p>
            店舗を利用した感想等あればご入力ください。<br />
            ※不快な言葉遣いなどは退会処分となることがあります。</p>
          </p>
          <%= form.submit "投稿する", class: 'comment-btn' %>
        <% end %>
      </div>
    <% else %>
      <p class="comment-warn">ログインユーザーのみコメント投稿ができます。</p>
    <% end %>
    <div class="comments">
      <h2 class="comment-title">コメント一覧</h2>
      <div class="comment-area" id="comment-area">
        <% if @comments %>
          <% @comments.reverse.each do |comment| %>
            <div class="comment">
              <p><%= comment.text %></p>
              <span class="contributor"><%= "by #{comment.user.nickname}" %></span>
              <span class="contributor"><%= "at :#{l comment.created_at}" %></span>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>